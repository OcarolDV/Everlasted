import pygame
import time, threading
pygame.init()

win = pygame.display.set_mode((1280, 720))

pygame.display.set_caption("Everlasted")

#self object
class player(object):
    
    def __init__(self, x, y, width, height):
        self.x = x
        self.y = y
        self.width = width
        self.height = height
        self.vel = 5
        self.walkCount = 0
        self.jumpCount = 10
        self.slashdmg = 10
    def draw(self,win):
        pygame.draw.rect(win, (0, 0, 255), (self.x, self.y, self.width, self.height))

       
class enemy(object):
    def __init__(self, x, y, width, height, end):
        self.x = x
        self.y = y
        self.width = width
        self.height = height
        self.vel = 5
        self.end = end
        self.path = [self.x, self.end]
        self.walkCount = 0
        self.jumpCount = 10
        self.slashdmg = 10

    def draw(self,win):
        pygame.draw.rect(win, (255, 0, 0), (self.x, self.y, self.width, self.height))


        
slashcool = 0
cool = 0
bg = pygame.image.load('BG.png')
bg = pygame.transform.scale(bg, (1280, 720))
dcount = 2
Elige = player(640, 480, 50, 50)
astralis = enemy(800, 500, 50, 50, 450)



def EligeMovement(velocity):
    keys = pygame.key.get_pressed()
    vel = velocity
    if keys[pygame.K_w] and Elige.y > vel:
        Elige.y -= vel 
    if keys[pygame.K_a] and Elige.x > Elige.vel:
        Elige.x -= vel 
    if keys[pygame.K_s] and Elige.y < 720 - Elige.height - Elige.vel:
        Elige.y += vel 
    if keys[pygame.K_d] and Elige.x < 1280 - Elige.width - Elige.vel:
        Elige.x += vel
        
def EnemyMovement(velocity):
    keys = pygame.key.get_pressed()
    vel = velocity
    if Elige.y < astralis.y and astralis.y > vel:
        astralis.y -= vel 
    if Elige.x < astralis.x and astralis.x > astralis.vel:
        astralis.x -= vel 
    if Elige.y > astralis.y and astralis.y < 720 - astralis.height - astralis.vel:
        astralis.y += vel 
    if Elige.x > astralis.x and astralis.x < 1280 - astralis.width - astralis.vel:
        astralis.x += vel

#IntroScreen
        '''
intro = False
while intro:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit()
            quit()
    win.fill((0, 0, 0))
    pygame.draw.rect(win, (255, 0, 0), (Elige.x, Elige.y, Elige.width, Elige.height))
    pygame.display.update()
    '''

def redrawGameWindow():
    win.blit(bg, (0,0))
    Elige.draw(win)
    astralis.draw(win)
    pygame.display.update()
#Mainloop
run = True
while run:
    
    redrawGameWindow()
    slashcool += pygame.time.get_ticks() - cool
    cool = pygame.time.get_ticks()
    keys = pygame.key.get_pressed()
    EligeMovement(5)
    EnemyMovement(5)
    pygame.time.delay(20)

    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit()
            quit()

    if keys[pygame.K_SPACE] and slashcool >= 500:
        EligeMovement(150)
        slashcool = 0
       
    else:
        EligeMovement(5)
